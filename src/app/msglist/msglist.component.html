<!-- Навигационная панель -->
<mat-drawer-container class="sidenav">
    <mat-drawer class="navbuttons" mode="side" opened>
        <button class="inbox" mat-mini-fab (click)="clickInBox()" [ngClass]="{'inboxactive': color}" title="Полученные сообщения">
        <mat-icon>drafts</mat-icon>
        
    </button><a>Получено</a>
        <button class="outbox" mat-mini-fab (click)="clickOutBox()" [ngClass]="{'outboxactive': color2}" title="Отправленные сообщения">
        <mat-icon>reply_all</mat-icon>
    </button><a>Отправлено</a>
        <button class="write" mat-mini-fab (click)="Write()" [ngClass]="{'writeactive': color3}" title="Отправить сообщение">
        <a> </a><mat-icon>create</mat-icon><a> </a>
    </button><a>Новое сообщение</a>
        <button class="poluch" mat-mini-fab (click)="GetAll()" title="Получить сообщения">
      <mat-icon>autorenew</mat-icon>
    </button><a>Обновить</a>
    </mat-drawer>
    <mat-drawer-content>
        <div [ngStyle]="listview" *ngIf="showIn" class="listRows">
            <div *ngFor="let element of msg_u; let i=index">
                <div class="rows"
                (click)="clickRow(element)" [ngClass]="{'clickRowColor': selectedRowIndex == element.name1}">
                    <a class="f" *ngIf="element?.name2=='ф'"><mat-icon>attach_file</mat-icon></a>
                    <button class="ava" mat-mini-fab disabled>
                        <mat-icon>perm_identity</mat-icon>
                    </button>
                    <div class="listblock2">
                        <div class="from">{{element?.name4}}</div>
                        <div class="to"><a>Тема: </a>{{element?.name5}}</div>
                        <span class="time">{{element?.name6}}</span>
                    </div>
                </div>
            </div>
        </div>
        <div [ngStyle]="cardread" class="msgread">
            <app-readmsg [read] = "read" [srv] = "srv"></app-readmsg>
        </div>
        <div [ngStyle]="cardwrite" class="msgwrite">
            <app-writemsg></app-writemsg>
        </div>
        <!--<div *ngIf="list">
            <div class="table-container">
                <table mat-table [dataSource]="msg_u">
                    <ng-container matColumnDef="position">
                        <th mat-header-cell *matHeaderCellDef> Влож. </th>
                        <td mat-cell *matCellDef="let element" style="color: red"> {{element?.name2}} </td>
                    </ng-container>
                    <ng-container matColumnDef="name">
                        <th mat-header-cell *matHeaderCellDef> От </th>
                        <td mat-cell *matCellDef="let element"> {{element?.name4}} </td>
                    </ng-container>
                    <ng-container matColumnDef="weight">
                        <th mat-header-cell *matHeaderCellDef> Тема </th>
                        <td mat-cell *matCellDef="let element"> {{element?.name5}} </td>
                    </ng-container>
                    <ng-container matColumnDef="symbol">
                        <th mat-header-cell *matHeaderCellDef> Отправлено </th>
                        <td mat-cell *matCellDef="let element"> {{element?.name6}} </td>
                        
                    </ng-container>
                    <tr class="head-table" mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                    <tr class="row-table" mat-row *matRowDef="let row; columns: displayedColumns;" (click)="
                      clickRow(row)" [ngClass]="{'clickRowColor': selectedRowIndex == row.name1}"></tr>
                </table>
            </div>
        </div>-->
        <!--<mat-card [ngStyle]="card1active" *ngIf="showCard" class="list-card">
            <mat-card-actions class="card-buttons">
                <button class="backltr" mat-mini-fab (click)="Cancel()" title="Назад">
                    <mat-icon>keyboard_backspace</mat-icon>
                  </button>
                <a>{{srv[0]?.name2}}</a>
                <button class="answbtn" mat-button>Ответить</button>
            </mat-card-actions>
            <mat-card-content class="card-content">
                <hr class="hr-shelf">
                <div class="lifiles">
                    <ul>
                        <li *ngFor="let pos of read; let i=index">
                            <p *ngIf="pos?.name7=='1'" class="msginfo">{{pos?.name3}}</p>
                            <p *ngIf="pos?.name7=='1'" class="msgtext">{{pos?.name2}}</p>
                        </li>
                    </ul>
                </div>
                
                <div class="fileadd">
                    <div class="block" *ngFor="let pos of read; let i=index">
                        
                        <span>
                            <p *ngIf="pos?.name7=='2'" class="fileinfo" 
                                (click)="clickFile(pos.name1, pos.name6, pos.name2, pos.name5)">
                                <mat-card class="example-card">
                                    <mat-icon>description</mat-icon><br>
                                    <a>{{pos?.name2}}</a><br>
                                    <a>{{pos?.name4}}</a>                    
                                </mat-card>
                            </p>
                        </span>
                    </div>
                </div>
            </mat-card-content>
        </mat-card>-->
        <mat-card [ngStyle]="writeactive" *ngIf="writemsg" class="ltrcard">
            <input class="file-input" type="file" (change)="AddFiles($event)" #fileUpload>
                <button class="addfiles" mat-mini-fab (click)="fileUpload.click()" title="Добавить файлы">
                    <mat-icon>attach_file</mat-icon>
                </button><p>Вложить файлы</p>
                <a>Не более {{(q/1024).toFixed(2)}} Мб/{{(totalsize/1024).toFixed(2)}} Кб.</a>
            <div class="logo">
                <h3>{{letr}} сообщение</h3>
            </div>
            <mat-card-actions class="ltrbuttons">
                <div class="letterbtn">
                    <button class="btn1" mat-button [matMenuTriggerFor]="clickmenu">Адресат</button>
                    <mat-menu #clickmenu="matMenu">
                        <p *ngFor="let adr of adresat">
                            <button mat-button class="vibor" (click)="AdresatClick(adr)"> {{adr?.name2}}</button>
                        </p>
                    </mat-menu>
                    <a> {{ adritem}}</a>
                </div>
                <div class="letterbtn2">
                    <button [disabled]="dthema" class="thema" mat-button [matMenuTriggerFor]="clickthema" (click)="ThemeSrvClick()">Тема</button>
                    <mat-menu #clickthema="matMenu">
                        <p *ngFor="let thm of theme">
                            <button class="vibor" mat-button (click)="ThemeClick(thm)">{{thm?.name2}}</button>
                        </p>
                    </mat-menu>
                    <a> {{ thmitem}}</a>
                </div>
                <div class="letterbtn3">
                    <button [disabled]="dkomu" class="komu" mat-button [matMenuTriggerFor]="clickkomu" (click)="KomuSrvClick()">Кому</button>
                    <mat-menu #clickkomu="matMenu">
                        <p *ngFor="let kom of komu">
                            <button class="vibor" mat-button (click)="KomuClick(kom)">{{kom?.name2}}</button>
                        </p>
                    </mat-menu>
                    <a> {{ komitem}}</a>

                </div>
                <div class="info">
                    <p>От 4 до {{maxq}} символов/{{textarea.length}}</p>
                </div>
            </mat-card-actions>
            <mat-card-content class="ltrcontent">
                <textarea class="textarea"  [(ngModel)]="textarea" [ngClass]="{'maxon': textarea.length>=maxq }">
                </textarea>

                <div class="fileadd">
                    <div class="block" *ngFor="let p of index_files let i=index">
                        <!--<button class="del" mat-mini-fab (click)="DelF(i)" title="Удалить файл из списка">
                            <mat-icon >clear</mat-icon>
                        </button>
                        <a>{{i+1}}) {{formData.get(p).name}}-{{(formData.get(p).size/1024).toFixed(2)}} Кб.</a>-->
                    
                        <span>
                            <mat-card class="example-card" (click)="DelF(i)">
                                <mat-icon>description</mat-icon><br>
                                <a>{{formData.get(p).name}}</a><br>
                                <!--<a></a><br>-->
                                <a>{{(formData.get(p).size/1024).toFixed(2)}} Кб.</a>                    
                            </mat-card>
                        </span>
                    </div>  
                </div>

            </mat-card-content>
            <div class="sendltrbtn">
                <div class="right">
                    <!--<a class="altr">Колличество сообщений - не более {{maxs}} раз в сутки. Текущий - {{thiss}}</a>
                    <button class="writeltr" mat-button (click)="Cancel()">Отмена</button>-->
                    <button class="writeltr" [disabled]="!(maxq>textarea.length) || !(textarea.length>3)" mat-button (click)="Send()">Отправить</button>
                </div>
            </div>
        </mat-card>
    </mat-drawer-content>
</mat-drawer-container>