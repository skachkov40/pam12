
<!-- Навигационная панель -->
<mat-drawer-container class="sidenav">
  <mat-drawer class="navbuttons" mode="side" opened>
    <button class="inbox" mat-mini-fab (click)="clickInBox()"
      [ngClass]="{'inboxactive': color}" title = "Входяшие сообщения">
        <mat-icon>drafts</mat-icon>
    </button>
    <button class="outbox" mat-mini-fab (click)="clickOutBox()"
      [ngClass]="{'outboxactive': color2}" title = "Исходяшие сообщения">
        <mat-icon>reply_all</mat-icon>
    </button>
    <button class="write" mat-mini-fab (click)="Write()"
      [ngClass]="{'writeactive': color3}" title = "Отправить НОВОЕ сообщение">
        <mat-icon>create</mat-icon>
    </button>
    <button class="poluch" mat-mini-fab (click)="GetAll()" title = "Получить сообщения">
      <mat-icon>autorenew</mat-icon>
    </button>
  </mat-drawer>
  <mat-drawer-content >
    <div *ngIf="showIn"> 
      <div  class="table-container">
        <table mat-table [dataSource]="msg">
          <ng-container matColumnDef="position">
            <th mat-header-cell *matHeaderCellDef> Влож. </th>
            <td mat-cell *matCellDef="let element"style="color: red"> {{element?.name2}} </td>
          </ng-container>
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef> От </th>
            <td mat-cell *matCellDef="let element"> {{element?.name4}} </td>
          </ng-container>
          <ng-container matColumnDef="weight">
            <th mat-header-cell *matHeaderCellDef> Тема </th>
            <td mat-cell *matCellDef="let element" > {{element?.name5}} </td>
          </ng-container>
          <ng-container matColumnDef="symbol">
            <th mat-header-cell *matHeaderCellDef> Отправлено </th>
            <td mat-cell *matCellDef="let element"> {{element?.name6}} </td>
            <button mat-mini-fab color="primary" ><mat-icon>edit</mat-icon></button>
          </ng-container>
          <tr class="head-table" mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
          <tr class="row-table" mat-row *matRowDef="let row; columns: displayedColumns;" (click)="
          clickRow(row)" [ngClass]="{'clickRowColor': selectedRowIndex == row.name1}"></tr>
        </table>
      </div>
    </div>
    <mat-card [ngStyle]="card1active" *ngIf="showCard" class="list-card" >
        <mat-card-actions class="card-buttons">
          <button class="backltr" mat-button (click)="Cancel()">Назад</button>
          <button class ="themebtn" mat-button>Тема:</button>
          <a>{{srv[0]?.name2}}</a>
          <button class ="answbtn" mat-button>Ответить</button>
        </mat-card-actions>
        <mat-card-content class="card-content">       
          <ul>
            <li *ngFor="let pos of read; let i=index">
              <p class="msginfo">{{pos?.name3}}</p>
              <p class="msgtext2">{{pos?.name2}}</p>
             </li>
          </ul> 
        </mat-card-content> 
    </mat-card>
    <div *ngIf="showOut">
        <div class="table-container">
          <table mat-table [dataSource]="msg2">
            
            <!-- Номер п/п Column -->
            <ng-container matColumnDef="position">
              <th mat-header-cell *matHeaderCellDef> Влож. </th>
              <td mat-cell *matCellDef="let element"> {{element?.name2}} </td>
            </ng-container>
        
            <!-- От Column -->
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef> От </th>
              <td mat-cell *matCellDef="let element"> {{element?.name4}} </td>
            </ng-container>
        
            <!-- Тема Column -->
            <ng-container matColumnDef="weight">
              <th mat-header-cell *matHeaderCellDef> Тема </th>
              <td mat-cell *matCellDef="let element"> {{element?.name5}} </td>
            </ng-container>
        
            <!-- Отправлено Column -->
            <ng-container matColumnDef="symbol">
              <th mat-header-cell *matHeaderCellDef> Отправлено </th>
              <td mat-cell *matCellDef="let element"> {{element?.name6}} </td>
            </ng-container>
        
            <tr class="head-table" mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr class="row-table" mat-row *matRowDef="let row2; columns: displayedColumns;" (click)="
            clickRow2(row2)" [ngClass]="{'clickRowColor2': selectedRowIndex2 == row2.name1}"></tr>
          </table>
        </div>
        
    </div>
    <mat-card [ngStyle]="card2active" *ngIf="showCard2" class="list-card2" >
        <mat-card-actions class="card-buttons2">
          <button class="backltr" mat-button (click)="Cancel()">Назад</button>
          <button class ="themebtn" mat-button>Тема:</button>
          <a>{{srv2[0]?.name2}}</a>
          <button class ="answbtn" mat-button>Ответить</button>
        </mat-card-actions>
        <mat-card-content class="card-content2">        
          <ul>
            <li *ngFor="let pos2 of read2; let i=index">
              <p class="msginfo2">{{pos2?.name3}}</p>
              <p class="msgtext2">{{pos2?.name2}}</p>  
             </li>
          </ul> 
        </mat-card-content> 
    </mat-card>
    <mat-card [ngStyle]="writeactive" *ngIf="writemsg" class="ltrcard">
         <div class="logo">
      <h3>Подготовка и отправка {{letr}} сообщения</h3>
        </div>
        <mat-card-actions class="ltrbuttons">
          <div class="backbtn">
            <button class="backltr" mat-button (click)="Cancel()">Назад</button>
          </div>
          <div class="letterbtn">
        <button mat-button [matMenuTriggerFor]="clickmenu">Адресат</button>
        <mat-menu #clickmenu="matMenu">
          <button mat-menu-item *ngFor="let adr of adresat">
            <span (click)="AdresatClick(adr)">{{adr?.name2}}</span>
          </button>
        </mat-menu>
          <a>{{adritem}}</a>
      </div>
        <div class="letterbtn">
          <button [disabled] = "dthema" class="thema" mat-button [matMenuTriggerFor]="clickthema" (click)="ThemeSrvClick()">Тема</button>
            <mat-menu #clickthema="matMenu">
              <button mat-menu-item *ngFor="let thm of theme">
                <span (click)="ThemeClick(thm)">{{thm?.name2}}</span>
              </button>
           </mat-menu>
        <a>{{thmitem}}</a>
      </div>
        <div class="letterbtn">
          <button [disabled] = "dkomu" class="komu" mat-button [matMenuTriggerFor]="clickkomu" (click)="KomuSrvClick()">Кому</button>
          <mat-menu #clickkomu="matMenu">
            <button mat-menu-item *ngFor="let kom of komu">
              <span (click)="KomuClick(kom)">{{kom?.name2}}</span>
            </button>
         </mat-menu>
          <a>{{komitem}}</a>
        </div>
        </mat-card-actions>
        <mat-card-content class="ltrcontent">       
          <!--<textarea>-->
            <p>{{amsg_id}}</p>
            <p>{{amsg_kod}}</p>
            <p>{{id_theme}}</p>
            <p>{{id_komu}}</p>

          <!--</textarea>-->
        </mat-card-content> 
      <div class="sendltrbtn">
        <button class="writeltr" mat-button (click)="Cancel()">Отмена</button>
        <button class="writeltr" mat-button (click)="Send()">Отправить</button>
        <a>Колличество сообщений - не более {{q}} раз в сутки</a>
      </div>
    </mat-card>
  </mat-drawer-content>
</mat-drawer-container>
